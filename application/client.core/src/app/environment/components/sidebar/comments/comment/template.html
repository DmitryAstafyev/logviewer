<div [attr.class]="'wrapper ' + (comment.color !== undefined ? 'black' : 'white')">
    <mat-card [ngStyle]="{'background': comment.color}">
        <mat-card-subtitle (click)="ngOnShow()">
            <span class="position-label">{{comment.selection.start.position}} - {{comment.selection.end.position}}</span>
        </mat-card-subtitle>
        <mat-card-content>{{comment.comment}}</mat-card-content>
        <mat-card-actions>
            <button mat-icon-button color="primary" [matMenuTriggerFor]="commentCategoryMenu">
                <mat-icon>color_lens</mat-icon>
            </button>
            <button mat-icon-button color="primary" (click)="ngOnEdit()">
                <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button color="primary" (click)="ngOnReplay(undefined)">
                <mat-icon>replay</mat-icon>
            </button>
            <button mat-icon-button color="primary" aria-label="Available Actions" [matMenuTriggerFor]="commentActionsMenu">
                <mat-icon>more_horiz</mat-icon>
            </button>
        </mat-card-actions>
    </mat-card>

    <div class="replay-editor" *ngIf="_ng_response !== undefined">
        <app-sidebar-app-comments-editor
            [comment]="_ng_response"
            [save]="ngOnResponseSave"
            [mode]="(_ng_response.guid === '' ? 'create' : 'edit')"
            [cancel]="ngOnResponseCancel"
        ></app-sidebar-app-comments-editor>
    </div>
    <mat-menu #commentActionsMenu="matMenu" xPosition="before">
        <button mat-menu-item (click)="ngOnEdit()">
            <mat-icon>edit</mat-icon>
            <span>Edit</span>
        </button>
        <button mat-menu-item (click)="ngOnShow()">
            <mat-icon>search</mat-icon>
            <span>Show</span>
        </button>
        <mat-divider></mat-divider>
        <button mat-menu-item (click)="ngOnRemove()">
            <mat-icon>delete</mat-icon>
            <span>Remove</span>
        </button>
    </mat-menu>
    <mat-menu #commentCategoryMenu="matMenu" xPosition="before">
        <div class="colors-wrapper">
            <button class="comment-color-selector" mat-mini-fab color="primary" aria-label="Category" (click)="ngOnSetColor(undefined)">
                <mat-icon>remove</mat-icon>
            </button>
            <button *ngFor="let color of _ng_colors"
                    class="comment-color-selector"
                    mat-mini-fab color="primary"
                    (click)="ngOnSetColor(color)"
                    [ngStyle]="{'background': color}">
                
            </button>
        </div>
    </mat-menu>
</div>
